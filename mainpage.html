<!DOCTYPE html>
<html lang="zh-TW">               <!--這個是讓html知道這個頁面最主要的語言-->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>主頁</title>
    <link href="https://fonts.googleapis.com/css2?family=Baloo+2&display=swap" rel="stylesheet">
    <style>
        body{
            margin:0;
            font-family: "Baloo 2",cursive;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background: linear-gradient(135deg,#ffecdf 0%,#fcb69f 100%);
        }
        .calender{
            background: rgba(255, 255, 255, 0.85);
            padding: 20px;
            border-radius: 20px;                           /*讓邊角變圓*/
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);       /*在元素周圍加上陰影，使得有立體感，語法是這樣的box-shadow:x位移 Y位移 模糊程度 顏色rbga()*/
            width: 700px;
            height: 450px;
        }
        .calender-header{
            text-align:center;                    /*設定文字的水平對齊方向(左，中，右三種)*/
            font-size: 1.8em;
            color: #ff6f61;
            margin-bottom: 10px;
            user-select: none;                      /*即不可被使用者選取*/
        }


        /*以下的css是使得元素可以從左排到右的關鍵，他改變了預設的從上到下，改成網格式的排版*/
        .calender-grid{
            display: grid;                                 /*CSS中的Grid Layout系統，就像類似表格的網格排版*/
            grid-template-columns: repeat(7,1fr);           /*這個是設定網格要幾欄，每欄多寬,語法是repeat(幾欄，多寬)*/
            gap: 5px;                                       /*格子之間的間距*/
        }
        .day-header{
            text-align: center;
            font-weight: bold;
            color: #444;
            user-select: none;
        }
        .day{
            background-color: white;
            border-radius: 10px;
            padding:10px;
            text-align: center;
            cursor:pointer;
            transition: 0.3s;                               /*讓某些css屬性的變化過渡完成，而不是瞬間完成*/
            box-shadow:0 2px 5px rgba(0,0,0,0.05);
            user-select:none;
        }
        .day:hover{
            background: #ffede6;
            transform: scale(1.05);           /*這個是縮放的意思，即不同過改變元素本身的寬高，所以不會使得元素的位置亂掉*/
        }
        .empty{
            background: transparent;          /*這個是透明的意思*/
            box-shadow:none;
            cursor:default

        }
        .btn-group{
            display: flex;
            justify-content: space-between;
            gap: 10px;
            margin-bottom: 15px;
        }

        .btn-group button{
            padding: 8px 15px;
            background:linear-gradient(135deg,#ff9a9e,#ff6f61);
            color: white;
            border:none;                /*這個是指邊框的線條*/
            border-radius: 10px;        /*指圓滑程度*/
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
            user-select:none;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .btn-group button:hover{
            transform: scale(1.05);
            background: linear-gradient(135degg,#ffb6b9,#ff867c);
        
        }

        .main-container{
            display: flex;
            width:100%;
            height: 100%;
        }

        /* 侧边栏设计 */
        .sidebar{
            width: 250px;
            background:rgba(255,255,255,0.9);
            backdrop-filter: blur(10px);  /*磨砂玻璃效果,使得元素背后的内容做模糊处理*/
            box-shadow:2px 0 10px rgba(0,0,0,0.1);
            display: flex; /*使得容器中的子元素会自动贴在同一排，容易做置中，靠左等*/
            flex-direction: column;   /*将flex预设的横着排变成上到下*/
            padding: 20px 0;
        }
    
        .sidebar-header{
            padding: 0 20px;
            color: #ff6f61;
            border-bottom: 1px solid #eee;
            margin-bottom: 20px;
        }

        .sidebar-menu li{
            padding: 15px 25px;
            cursor:pointer;
            transition: 0.3s;    /*颜色会慢慢变，要搭配hover*/
            color: #555;
            font-size: 1.1em;
        }

        .sidebar-menu li:hover{
            background: #ffede6;
            color: #ff6f61;
            padding-left: 35px;    /*padding是控制内容跟边框的距离，配上hover跟transition则可以有一种位移感*/   
        }

        .sidebar-menu li.active{  /*active是其中一个class*/
            background:#ff6f61; /*背景颜色*/
            color: white;       /*文字颜色*/
        }

        .calender{
            flex: 1;  /**/
            margin:auto;
            background:rgba(255, 255, 255, 0.85);
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            max-width: 800px;
            height:aut0;
        }

        .menu-toggle{
            position: fixed;
            top: 20px;  
            left: 20px;
            z-index: 1000;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            gap: 5px;
            transition:all 0.3s ease-in-out;
        }

        .cross{
            position: fixed;
            top: 20px;  
            left: 20px;
            z-index: 1000;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            gap: 5px;
            transition:all 0.3s ease-in-out;

            /*初始狀態為隱藏*/
            opacity: 0;
            pointer-events: none;
        }

        .bar{
            width: 25px;   /*设定长线长度*/
            height: 3px;    /*细小宽度*/
            background-color: #4a3432;
            border-radius: 2px;
            transition: 0.3s;     /*暂时还没用到好像*/
        }

        /*侧边栏的初始状态，隐藏在左边*/
        .sidebar{
            position: fixed;
            left: 0;
            top: 0;
            width: 250px;
            height: 100%;
            background: rgba(255, 255, 255, 0.95);
            transform: translateX(-250px);    /*往左走移除荧幕(translateX x方向)*/
            transition: transform 0.3s ease-in-out;
            z-index:999;
        }

        /*當側邊欄有"open"這個class時，移回畫面中*/
        .sidebar.open{
            transform:translateX(0);
        }

        .day.today{
            background-color: #ff6f61;
            color: white;
            font-weight: bold;
            border-radius: 50%;       /*变成圆一点，看起来更像标记*/
            box-shadow: 0 4px 10px rgba(255, 111, 97, 0.4);
        }
        
        .jump-group{
            display: flex;
            gap: 5px;
        }

        .jump-group select{
            padding:5px;
            border-radius: 8px;
            border: 1px solid #ff9a9e;
            color: #ff6f61;
            font-family: inherit;      /*继承父元素的字体*/
            cursor: pointer;
            background: white;
        }
    

    </style>
</head>
<body>
    <div class="main-container">
        <div class="menu-toggle " id="menu-toggle">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
        </div>

        <div class="cross" id="cross">
            ❌
        </div>
        
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h2>功能选单</h2>
            </div>
            <ul class="sidebar-menu">
                <li onclick="window.location.href='index.html'">首页</li>   <!--作用是点击后就会跳转页面-->
                <li class='active'>日曆視圖</li>
                <li onclick="alert(功能尚未开发完成)">活动记录</li>   <!--alert是跳出一个视窗，然后出现后面的字样(显示在console里面)-->
                <li onclick="alert(设定功能尚未开发完成)">设定</li>
               
            </ul>
        </div>


    <div class="calender">
        <div class="btn-group">
            <button id="prev-month">‹ 上一個月</button>

            <div class="jump-group">
                <select id="jump-year"></select>
                <select id="jump-month">
                    <option value="0">1月</option>
                    <option value="1">2月</option>
                    <option value="2">3月</option>
                    <option value="3">4月</option>
                    <option value="4">5月</option>
                    <option value="5">6月</option>
                    <option value="6">7月</option>
                    <option value="7">8月</option>
                    <option value="8">9月</option>
                    <option value="9">10月</option>
                    <option value="10">11月</option>
                    <option value="11">12月</option>

                </select>


            </div>
            <button id="next-month">下一個月 ›</button>
        </div>
        <div  id='calender-header'class="calender-header">2025年8月</div>
        <div class="calender-grid" id='calender-grid'>            <!--grid是指網格，方格等，就是指日曆的形狀-->
        <!--星期幾標題-->
        <div class="day-header">日</div>
        <div class="day-header">一</div>  
        <div class="day-header">二</div>  
        <div class="day-header">三</div>  
        <div class="day-header">四</div>  
        <div class="day-header">五</div>  
        <div class="day-header">六</div>   
        </div>   
        </div>
    </div>

    <script>
    //     let currentYear = 2025;
    //     let currentMonth = 7; // 0-based (7 = 8月)

    //     const header = document.getElementById("calender-header");
    //     const grid = document.getElementById("calender-grid");

    //     function renderCalender(year,month) {                    //用function(把這個函式保存在記憶體中，隨時可callout),不能用let           //renderCalender的意思是把日曆渲染(畫)出來
    //         //上面的year,month是我們設定的變數，下面會有用currentYear(is defined)，currentMonth(is defined)來賦值
    //        const todayDate=now.getDate(); //今天几号
    //        const todayMonth=now.getMonth(); //今天几月
    //        const todayYear=now.getFullYear(); //今天几年

    //         // 更新標題
    //         header.textContent = `${year}年${month + 1}月`;

    //         // 清除舊的日期格子（保留星期標題前 7 格）
    //         while (grid.children.length > 7) {
    //             grid.removeChild(grid.lastChild);
    //         }

    //         // 計算這個月的第一天星期幾
    //         const firstDay = new Date(year, month, 1).getDay();

    //         // 計算這個月有幾天
    //         const daysInMonth = new Date(year, month + 1, 0).getDate();          //8月0號則代表7月的最後一天

    //         // 填空白格子，所以我們日期跟禮拜幾才可以對上，因為這是決定我們到底要空多少格子
    //         for (let i = 0; i < firstDay; i++) {     
    //             const emptyCell = document.createElement('div');
    //             emptyCell.classList.add('empty');
    //             grid.appendChild(emptyCell);
    //         }

    //         // 填日期格子
    //         for (let day = 1; day <= daysInMonth; day++) {
    //             const cell = document.createElement('div');
    //             cell.classList.add('day');
    //             cell.textContent = day;
    //             cell.addEventListener('click', function() {
    //                 const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
    //                 localStorage.setItem('selectedDate',dateStr);               //存日期到LocalStorage
    //                 window.location.href = `Diary.html`;
    //             });
    //             grid.appendChild(cell);
    //             //原本在script中添加的div是只存在在記憶體中的，他們並沒有放進html的結構中，所以不會出現在瀏覽器內，appendChild的作用就是把這個出生的元素搬進去htmml某個父容器中
    //         }
    //     }

    //     document.getElementById('prev-month').addEventListener('click', () => {
    //         currentMonth--;                           //點擊prev-month時currentMonth-1
    //         if (currentMonth < 0) {                   //額外設定，當currentMonth小過0(即-1)
    //             currentMonth = 11;                     //即設定成Month=11(11代表12月)
    //             currentYear--;                         //然後年份-1
    //         }
    //         renderCalender(currentYear, currentMonth);
    //     });

    //     document.getElementById('next-month').addEventListener('click', () => {
    //         currentMonth++;
    //         if (currentMonth > 11) {            //即12月
    //             currentMonth = 0;
    //             currentYear++;
    //         }
    //         renderCalender(currentYear, currentMonth);
    //     });

    //     //判断这一天是不是今天
    //     if (day===todayDate &&month === todayMonth &&year ===todayYear){
    //         cell.classList.add('today');
    //     }

    //     cell.addEventListener('click', function() {
    //         const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
    //         localStorage.setItem('selectedDate', dateStr);
    //         window.location.href = `Diary.html`;
    //     });
    //     grid.appendChild(cell);
    


    //     // 初始化
    //     renderCalender(currentYear, currentMonth);           //這個是說一開始進入頁面的時候要先顯示的初始內容
        
    //     const menuToggle=document.getElementById('menu-toggle');
    //     const sidebar=document.getElementById('sidebar')
    //     const crosssymbol=document.getElementById('cross')
 
    //     menuToggle.addEventListener('click',(event)=>{
    //         //意思是原本沒有open就加上，如果有就拿到
    //         sidebar.classList.toggle('open');    //classList就是class的意思，搭配後面的toggle就可以添加or remove open的id
    //         //toggle是dom api ，means切換，當我們click時，檢查有無open,有就remove,沒有就添加
    //     if(sidebar.classList.contains("open")){
    //         menuToggle.style.opacity="0";     /*假設sidebar的classs屬性中還包含了open，則使得透明度變成0*/
    //         menuToggle.style.pointerEvents='none'   /*pointEvent是你滑鼠點擊時的活動。none代表無法點擊*/
    //         crosssymbol.style.opacity="1";
    //         crosssymbol.style.pointerEvents='auto'
    //     }
    //     event.stopPropagation();   /*字面意思停止傳播*/
    //     /*簡單講解，html的結構有很多層，最外層叫document,中間是sidebar,最內層是button，當你點擊按鈕時，同時也會觸發別的eventlistener.所以通過stop propagation可以讓指令停在這邊就好*/
    //     });

        


    //     //點擊網頁其他地方會自動收起選單
    //     document.addEventListener('click',(event)=>{  /*event不是dom api而是自己設定的名稱*/
    //     //event是說當你click的時候，瀏覽器會產生這個物件，會包含這次點擊的細節，
    //     //在document添加addEventListener則是監聽整個網頁
    //         if(!sidebar.contains(event.target)&&!menuToggle.contains(event.target)){ /*注意event可以改名稱but target不能改，是內建的名稱*/
    //         //意思是如果你不是點擊的不是sidebar裡面的部分，也不是按鈕（means空白處）強制收回表單
    //             sidebar.classList.remove("open") ;
    //             menuToggle.style.opacity='1';   //恢復點擊
    //             menuToggle.style.pointerEvents="auto"  ; //恢復點擊
    //             crosssymbol.style.opacity='0';   //恢復點擊
    //             crosssymbol.style.pointerEvents="none"  ; //恢復點擊
    //         }
    //     }
    // );

    const realTime=new Date();

    let currentYear = realTime.getFullYear();
    let currentMonth = realTime.getMonth(); // 建議從 0 開始，比較好測試「今天」

    const header = document.getElementById("calender-header");
    const grid = document.getElementById("calender-grid");

    function renderCalender(year, month) {
        // --- 1. 定義現在的時間 ---
        const now = new Date();
        const todayDate = now.getDate();
        const todayMonth = now.getMonth();
        const todayYear = now.getFullYear();

        header.textContent = `${year}年${month + 1}月`;

        while (grid.children.length > 7) {
            grid.removeChild(grid.lastChild);
        }

        const firstDay = new Date(year, month, 1).getDay();
        const daysInMonth = new Date(year, month + 1, 0).getDate();

        for (let i = 0; i < firstDay; i++) {
            const emptyCell = document.createElement('div');
            emptyCell.classList.add('empty');
            grid.appendChild(emptyCell);
        }

        // --- 2. 進入日期迴圈 ---
        for (let day = 1; day <= daysInMonth; day++) {
            const cell = document.createElement('div');
            cell.classList.add('day');
            cell.textContent = day;

            // --- 3. 判斷這一天是不是今天 (必須在迴圈內) ---
            if (day === todayDate && month === todayMonth && year === todayYear) {
                cell.classList.add('today');
            }

            cell.addEventListener('click', function() {
                const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                localStorage.setItem('selectedDate', dateStr);
                window.location.href = `Diary.html`;
            });
            grid.appendChild(cell);
        }
    }

    // 按鈕監聽
    document.getElementById('prev-month').addEventListener('click', () => {
        currentMonth--;
        if (currentMonth < 0) {
            currentMonth = 11;
            currentYear--;
        }
        renderCalender(currentYear, currentMonth);
        syncJumpMenus();
        
    });

    document.getElementById('next-month').addEventListener('click', () => {
        currentMonth++;
        if (currentMonth > 11) {
            currentMonth = 0;
            currentYear++;
        }
        renderCalender(currentYear, currentMonth);
        syncJumpMenus();
    });

    // 初始化日曆
    renderCalender(currentYear, currentMonth);

    // --- 側邊欄與叉叉邏輯 ---
    const menuToggle = document.getElementById('menu-toggle');
    const sidebar = document.getElementById('sidebar');
    const crosssymbol = document.getElementById('cross');

    menuToggle.addEventListener('click', (event) => {
        sidebar.classList.add('open');
        menuToggle.style.opacity = "0";
        menuToggle.style.pointerEvents = 'none';
        crosssymbol.style.opacity = "1";
        crosssymbol.style.pointerEvents = 'auto';
        event.stopPropagation();
    });

    // 點擊網頁其他地方自動收起
    document.addEventListener('click', (event) => {
        if (!sidebar.contains(event.target) && !menuToggle.contains(event.target)) {
            sidebar.classList.remove("open");
            menuToggle.style.opacity = '1';
            menuToggle.style.pointerEvents = "auto";
            crosssymbol.style.opacity = '0';
            crosssymbol.style.pointerEvents = "none";
        }
    });

    // 也可以幫 crosssymbol 加上點擊事件 (可選)
    crosssymbol.addEventListener('click', () => {
        sidebar.classList.remove("open");
        menuToggle.style.opacity = '1';
        menuToggle.style.pointerEvents = "auto";
        crosssymbol.style.opacity = '0';
        crosssymbol.style.pointerEvents = "none";
    });

    const jumpYear=document.getElementById('jump-year');
    const jumpMonth=document.getElementById('jump-month');
    
    //初始化年份选择单（从2020到2035）
    function initJumpMenus(){
        const startYear=2020;
        const endYear=2035;

        for(let i =startYear; i<=endYear;i++){
            const option=document.createElement('option')
            option.value=i;
            option.textContent=i+'年';
            jumpYear.appendChild(option);
        }
        jumpYear.value  =currentYear;
        jumpMonth.value=currentMonth;
    }

        //监听年份与月份的变化
        function handleJump(){
            currentYear=parseInt(jumpYear.value);   //读取选单现在选的年份
            currentMonth=parseInt(jumpMonth.value);  //读取选单现在的月份
            renderCalender(currentYear,currentMonth);  //重新画一次日历
        }
        
        jumpYear.addEventListener('change',handleJump);      //当发现option变的时候，就要重新生成日历，是每次都刷新一次日历
        jumpMonth.addEventListener('change',handleJump);

        //点击上下月的按钮的时候，选单也会同步更新
        function syncJumpMenus(){        //这是避免假设按下一个月button的时候，option没跟着变，所以设定一个function然后callout他
            jumpYear.value=currentYear;
            jumpMonth.value=currentMonth;
        }

        initJumpMenus();
        
        //save current year 

 </script>
</body>
</html>