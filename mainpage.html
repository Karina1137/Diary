<!DOCTYPE html>
<html lang="zh-TW">               <!--這個是讓html知道這個頁面最主要的語言-->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>主頁</title>
    <link href="https://fonts.googleapis.com/css2?family=Baloo+2&display=swap" rel="stylesheet">
    <style>
        body{
            margin:0;
            font-family: "Baloo 2",cursive;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background: linear-gradient(135deg,#ffecdf 0%,#fcb69f 100%);
        }
        .calender{
            background: rgba(255, 255, 255, 0.85);
            padding: 20px;
            border-radius: 20px;                           /*讓邊角變圓*/
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);       /*在元素周圍加上陰影，使得有立體感，語法是這樣的box-shadow:x位移 Y位移 模糊程度 顏色rbga()*/
            width: 700px;
            height: 450px;
        }
        .calender-header{
            text-align:center;                    /*設定文字的水平對齊方向(左，中，右三種)*/
            font-size: 1.8em;
            color: #ff6f61;
            margin-bottom: 10px;
            user-select: none;                      /*即不可被使用者選取*/
        }


        /*以下的css是使得元素可以從左排到右的關鍵，他改變了預設的從上到下，改成網格式的排版*/
        .calender-grid{
            display: grid;                                 /*CSS中的Grid Layout系統，就像類似表格的網格排版*/
            grid-template-columns: repeat(7,1fr);           /*這個是設定網格要幾欄，每欄多寬,語法是repeat(幾欄，多寬)*/
            gap: 5px;                                       /*格子之間的間距*/
        }
        .day-header{
            text-align: center;
            font-weight: bold;
            color: #444;
            user-select: none;
        }
        .day{
            background-color: white;
            border-radius: 10px;
            padding:10px;
            text-align: center;
            cursor:pointer;
            transition: 0.3s;                               /*讓某些css屬性的變化過渡完成，而不是瞬間完成*/
            box-shadow:0 2px 5px rgba(0,0,0,0.05);
            user-select:none;
        }
        .day:hover{
            background: #ffede6;
            transform: scale(1.05);           /*這個是縮放的意思，即不同過改變元素本身的寬高，所以不會使得元素的位置亂掉*/
        }
        .empty{
            background: transparent;          /*這個是透明的意思*/
            box-shadow:none;
            cursor:default

        }
        .btn-group{
            display: flex;
            justify-content: space-between;
            gap: 10px;
            margin-bottom: 15px;
        }

        .btn-group button{
            padding: 8px 15px;
            background:linear-gradient(135deg,#ff9a9e,#ff6f61);
            color: white;
            border:none;                /*這個是指邊框的線條*/
            border-radius: 10px;        /*指圓滑程度*/
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
            user-select:none;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .btn-group button:hover{
            transform: scale(1.05);
            background: linear-gradient(135degg,#ffb6b9,#ff867c);
        
        }

        .main-container{
            display: flex;
            width:100%;
            height: 100%;
        }

        /* 侧边栏设计 */
        .sidebar{
            width: 250px;
            background:rgba(255,255,255,0.9);
            backdrop-filter: blur(10px);  /*磨砂玻璃效果,使得元素背后的内容做模糊处理*/
            box-shadow:2px 0 10px rgba(0,0,0,0.1);
            display: flex; /*使得容器中的子元素会自动贴在同一排，容易做置中，靠左等*/
            flex-direction: column;   /*将flex预设的横着排变成上到下*/
            padding: 20px 0;
        }
    
        .sidebar-header{
            padding: 0 20px;
            color: #ff6f61;
            border-bottom: 1px solid #eee;
            margin-bottom: 20px;
        }

        .sidebar-menu li{
            padding: 15px 25px;
            cursor:pointer;
            transition: 0.3s;    /*颜色会慢慢变，要搭配hover*/
            color: #555;
            font-size: 1.1em;
        }

        .sidebar-menu li:hover{
            background: #ffede6;
            color: #ff6f61;
            padding-left: 35px;    /*padding是控制内容跟边框的距离，配上hover跟transition则可以有一种位移感*/   
        }

        .sidebar-menu li.active{  /*active是其中一个class*/
            background:#ff6f61; /*背景颜色*/
            color: white;       /*文字颜色*/
        }

        .calender{
            flex: 1;  /**/
            margin:auto;
            background:rgba(255, 255, 255, 0.85);
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            max-width: 800px;
            height:aut0;
        }

        .menu-toggle{
            position: fixed;
            top: 20px;  
            left: 20px;
            z-index: 1000;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .bar{
            width: 25px;   /*设定长线长度*/
            height: 3px;    /*细小宽度*/
            background-color: #4a3432;
            border-radius: 2px;
            transition: 0.3s;     /*暂时还没用到好像*/
        }

        /*侧边栏的初始状态，隐藏在左边*/
        .sidebar{
            position: fixed;
            left: 0;
            top: 0;
            width: 250px;
            height: 100%;
            background: rgba(255, 255, 255, 0.95);
            transform: translateX(-250px);    /*往左走移除荧幕(translateX x方向)*/
            transition: transform 0.3s ease-in-out;
            z-index:999;
        }

        /*當側邊欄有"open"這個class時，移回畫面中*/
        .sidebar.open{
            transform:translateX(0);
        }

    </style>
</head>
<body>
    <div class="main-container">
        <div class="menu-toggle " id="menu-toggle">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
        </div>

        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h2>功能选单</h2>
            </div>
            <ul class="sidebar-menu">
                <li onclick="window.location.href='mainpage.html'">首页</li>   <!--作用是点击后就会跳转页面-->
                <li class='active'>日曆視圖</li>
                <li onclick="alert(功能尚未开发完成)">活动记录</li>   <!--alert是跳出一个视窗，然后出现后面的字样(显示在console里面)-->
                <li onclick="alert(设定功能尚未开发完成)">设定</li>
               
            </ul>
        </div>


    <div class="calender">
        <div class="btn-group">
            <button id="prev-month">‹ 上一個月</button>
            <button id="next-month">下一個月 ›</button>
        </div>
        <div  id='calender-header'class="calender-header">2025年8月</div>
        <div class="calender-grid" id='calender-grid'>            <!--grid是指網格，方格等，就是指日曆的形狀-->
        <!--星期幾標題-->
        <div class="day-header">日</div>
        <div class="day-header">一</div>  
        <div class="day-header">二</div>  
        <div class="day-header">三</div>  
        <div class="day-header">四</div>  
        <div class="day-header">五</div>  
        <div class="day-header">六</div>   
        </div>   
        </div>
    </div>

    <script>
        let currentYear = 2025;
        let currentMonth = 7; // 0-based (7 = 8月)

        const header = document.getElementById("calender-header");
        const grid = document.getElementById("calender-grid");

        function renderCalender(year,month) {                    //用function(把這個函式保存在記憶體中，隨時可callout),不能用let           //renderCalender的意思是把日曆渲染(畫)出來
            //上面的year,month是我們設定的變數，下面會有用currentYear(is defined)，currentMonth(is defined)來賦值
            // 更新標題
            header.textContent = `${year}年${month + 1}月`;

            // 清除舊的日期格子（保留星期標題前 7 格）
            while (grid.children.length > 7) {
                grid.removeChild(grid.lastChild);
            }

            // 計算這個月的第一天星期幾
            const firstDay = new Date(year, month, 1).getDay();

            // 計算這個月有幾天
            const daysInMonth = new Date(year, month + 1, 0).getDate();          //8月0號則代表7月的最後一天

            // 填空白格子，所以我們日期跟禮拜幾才可以對上，因為這是決定我們到底要空多少格子
            for (let i = 0; i < firstDay; i++) {     
                const emptyCell = document.createElement('div');
                emptyCell.classList.add('empty');
                grid.appendChild(emptyCell);
            }

            // 填日期格子
            for (let day = 1; day <= daysInMonth; day++) {
                const cell = document.createElement('div');
                cell.classList.add('day');
                cell.textContent = day;
                cell.addEventListener('click', function() {
                    const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                    localStorage.setItem('selectedDate',dateStr);               //存日期到LocalStorage
                    window.location.href = `Diary.html`;
                });
                grid.appendChild(cell);
                //原本在script中添加的div是只存在在記憶體中的，他們並沒有放進html的結構中，所以不會出現在瀏覽器內，appendChild的作用就是把這個出生的元素搬進去htmml某個父容器中
            }
        }

        document.getElementById('prev-month').addEventListener('click', () => {
            currentMonth--;                           //點擊prev-month時currentMonth-1
            if (currentMonth < 0) {                   //額外設定，當currentMonth小過0(即-1)
                currentMonth = 11;                     //即設定成Month=11(11代表12月)
                currentYear--;                         //然後年份-1
            }
            renderCalender(currentYear, currentMonth);
        });

        document.getElementById('next-month').addEventListener('click', () => {
            currentMonth++;
            if (currentMonth > 11) {            //即12月
                currentMonth = 0;
                currentYear++;
            }
            renderCalender(currentYear, currentMonth);
        });

        // 初始化
        renderCalender(currentYear, currentMonth);           //這個是說一開始進入頁面的時候要先顯示的初始內容
        
        const menuToggle=document.getElementById('menu-toggle');
        const sidebar=document.getElementById('sidebar')
 
        menuToggle.addEventListener('click',()=>{
            //意思是原本沒有open就加上，如果有就拿到
            sidebar.classList.toggle('open');    //classList就是class的意思，搭配後面的toggle就可以添加or remove open的id
            //toggle是dom api ，means切換，當我們click時，檢查有無open,有就remove,沒有就添加
        });

        //點擊網頁其他地方會自動收起選單
        document.addEventListener('click',(event)=>{
        //在document添加addEventListener則是監聽整個網頁
            if(!sidebar.contains(event.target)&&!menuToggle.contains(event.target)){
                sidebar.classList.remove("open") 
            }
        }
    );

 </script>
</body>
</html>