    <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Baloo+2&display=swap" rel="stylesheet">
    <title>Diary</title>
    <style>
        body{
            font-family: 'Baloo 2',cursive;
            transition: background 0.5s;
            padding: 20px;
            background:linear-gradient(135deg,#ffecdf 0%, #fcb69f 100%);
            color: #333;
            max-width: 800px;
            margin:0 auto;
            /* overflow: hidden;    éš±è—æº¢å‡ºçš„å…§å®¹ï¼Œä¿æŒé é¢æ•´æ½” */
            /* height: 100vh;       è®“bodyä½”æ»¿è¦–çª—é«˜åº¦ */
            display:flex;
            flex-direction: column;   /*å‚ç›´æ’åˆ—å…§å®¹ï¼Œå¯ç†è§£ç‚ºæ±ºå®šè»¸ç·šæ–¹å‘*/
            justify-content: flex-start;    /*å¾é ‚éƒ¨é–‹å§‹æ’åˆ—*/
            align-items: center;      /*æ°´å¹³å±…ä¸­*/
        }

        #username{
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
            color: #ff6f61;         /*ä½¿ç”¨ä¸»é¡Œè‰²*/
        } 

        #date-display{
            font-size: 1.2em;
            text-align: center;
            margin-bottom: 20px;
            color: #666;
        }

        .section{
            margin-top: 30px;
            padding: 20px;
            background:rgba(255,255, 255,0.85);
            border-radius: 20px;     /*æ›´å¤§åœ“è§’*/
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);  /*é™°å½±*/
            width: 100%;         /*æ»¿å¯¬ï¼Œä½†å—åˆ°body max-widthçš„é™åˆ¶*/
            max-width: 600px;      /*é™åˆ¶å¯¬åº¦ï¼Œé¿å…éå¯¬*/
            text-align: center;
            animation: fadeIn 1.5s ease-out;    /*åŠ å…¥æ·¡åŒ–å‹•ç•«*/       
        }


        @keyframes fadeIn{
            from{opacity: 0;transform: scale(0.8);}
            to{opacity: 1;transform: scale(1);}
        }


        /*ä¸‹é¢é€™è¡Œæ˜¯å…©å€‹campurçš„ï¼Œä¸€å€‹æ˜¯weatherSection,ä¸€å€‹æ˜¯mooodSection*/
        /*ä¸‹é¢ä»€éº¼div:first-childçš„æ„æ€æ˜¯åœ¨é€™å€‹å…ƒç´ ä¸­çš„ç¬¬ä¸€å€‹å­å…ƒç´ ï¼Œè€Œä¸”æ˜¯div*/
        #weatherSection>div:first-child, #moodSection >div:first-child,#expenseSection>div:first-child{
            font-size:1.5em;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
            color: #ff6f61;
        }


        /*å‚™è¨»ï¼šcoloræ˜¯å½±éŸ¿å…ƒç´ çš„æ–‡å­—ï¼Œbackground-coloræ˜¯å°ˆé–€æ§åˆ¶èƒŒæ™¯é¡è‰²ï¼Œbackgroundå‰‡å¯ä»¥åšå¾ˆæ±è¥¿ï¼Œä½†æ˜¯å‡å¦‚çµ¦ä»–ä¸€å€‹é¡è‰²ï¼Œå‰‡æœ‰æ§åˆ¶èƒŒæ™¯é¡è‰²çš„ä½œç”¨*/

        nav a{
            text-decoration: none;         /*é€™æ˜¯æŠŠè¶…éˆæ¥çš„åº•ç·šå»æ‰*/
            color: #ff6f61;
            border: 2px solid #ffd6d6;
            background:#fff;
            font-weight: bold;          /*ä½¿å¾—æ–‡å­—çš„ç²—ç´°ç­‰æ–¼boldçš„ç²—ç´°*/
            padding: 10px 20px;
            border-radius: 10px;
            transition: 0.3s;

        }

        #diary-header{
            margin-top: 30px;
            padding: 20px;
            background:rgba(255,255, 255,0.85);
            border-radius: 20px;     /*æ›´å¤§åœ“è§’*/
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);  /*é™°å½±*/
            width: 100%;         /*æ»¿å¯¬ï¼Œä½†å—åˆ°body max-widthçš„é™åˆ¶*/
            max-width: 600px;      /*é™åˆ¶å¯¬åº¦ï¼Œé¿å…éå¯¬*/
            text-align: center;
            animation: fadeIn 1.5s ease-out;    /*åŠ å…¥æ·¡åŒ–å‹•ç•«*/ 
        }


        nav a:hover{
            background: #ffd6d6;
            transform: scale(1.05);
        }

        .options{
             display: flex;
             justify-content: center;
             gap: 10px;
        }

        .options button{    
            padding: 10px 20px;
            border-radius: 10px;
            border: 2px solid #ffd6d6;
            background:#fff;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1em;
            min-width: 60px;        /*ä¸ç®¡å±å¹•æ€éº¼è®Šï¼Œæœ€å°çš„å¯¬åº¦æ˜¯60px*/
            color: #444;
        }   

        .options button.selected{                 /*é€™ç¾¤do*/
            font-weight: bold;
            border-color: #ff6f61;
            background:#ffd6d6;
            color:#ff6f61
        }
        

        .options button:hover{
            background:#ffebe9;
            transform: scale(1.05);       
        }

        #expenseSection{
            margin-top: 20px;
        }

        .expense-category{
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            justify-content: center;        /*å±…ä¸­å°é½Šè¼¸å…¥æ¡†*/
            flex-wrap: wrap;                /*å…è¨±æ›è¡Œï¼Œé©æ‡‰å°ç†’å¹•*/
        }

        .expense-category input{
            width: 80px;
            padding: 5px;
            border: 1px solid #ffd6d6;      /*åŒ¹é…é‚Šæ¡†è‰²*/
            border-radius: 10px;
            margin-left: 5px;
            outline: none;           /*é€™å€‹outlineçš„æ„æ€æ˜¯ç•¶æˆ‘å€‘é»æ“Šè¼¸å…¥æ¡†çš„æ™‚å€™ï¼Œå¤–æ¡†é¡è‰²æœƒè®ŠåŒ–ï¼Œé€™é‚Šæ˜¯æŠŠè®ŠåŒ–å–æ¶ˆæ‰*/
            transition: 0.3s;
        }

        .expense-category input:focus{
            border-color:#ff6f61;     /*èšç„¦æ™‚ä¸»é¡Œè‰²*/
        }

        .todo-item.completed .todo-text,.todo-item.completed .todo-time{
            text-decoration:line-through;          /*é€™å€‹çš„æ„æ€æ˜¯ç‚ºæ–‡å­—è£é£¾ï¼Œé€™å€‹æ˜¯åŠ ä¸Šä¸€æ¢ç·š*/
            color:gray;
        }

        .todo-header{
            display: flex;
            justify-content: space-between;  /*å·¦å³åˆ†é–‹*/
            align-items: center;
            margin-bottom: 10px;
            color:#ff6f61;         /*æ¨™é¡Œä¸»é¡Œè‰²*/
        }

        .todo-header h2{
            margin: 0;
        }

        #add-todo{
            padding: 10px 20px;
            background: #ff6f61;
            color: white;
            border:none;
            border-radius:10px;
            cursor: pointer;
            transition: 0.3s;
        }


        #add-todo:hover{
            background:#ff867c;
            transform: scale(1.05);
        }

        #add-todo:hover{
            background: #ff867c;
            transform: scale(1.05);
        }   
        
        /*å¿ƒå¾—å€è¨­è¨ˆ*/
        .todo-exp{ 
        max-width:640px;
        margin-top: 20px;
        font-family: 'Baloo 2',cursive;
        line-height: 1.6;
        background: rgba(255, 255, 255, 0.85);
        padding: 20px;
        border-radius: 20px;
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .todo-exp h2{
            margin: 0 0 8px 0;
            font-size: 18px;
            color: #ff6f61;
        }

        .todo-exp label{
            display:block;
            margin-top: 12px;
            margin-bottom: 6px;
            color: #333;
        }


        /*ç·¨è™Ÿspançš„è¨­è¨ˆ*/
        .todo-exp span{
            display: inline-block;          /*è®“å…ƒç´ æ°´å¹³æ’åˆ—ï¼Œä½†åˆèƒ½åƒæ–¹å¡Šä¸€æ¨£è¨­ç½®å¯¬é«˜å’Œç·¨è·*/
            width: 28px;
            text-align: right;
            margin-right: 10px;            /*è¨­ç½®å…ƒç´ çš„å¤–é‚Šè·*/
            font-weight: 600;              /*è¨­å®šå­—é«”çš„ç²—ç´°*/
            color: #666;
            user-select: none;
        }

        /*æŠŠinputçš„å¤–æ¡†ç§»é™¤ï¼Œæ”¹æˆåº•ç·šæ¨£å¼*/
        .todo-exp input[type='text']{
            width: calc(100%-48px);      /*æ‰£æ‰ç·¨è™Ÿå¯¬åº¦èˆ‡é–“è·ï¼Œç¢ºä¿æ›è¡Œæ™‚ä¸æœƒè¶…å‡º*/
            /*100%æ˜¯å–æ±ºæ–¼çˆ¶å…ƒç´ çš„æŒ‡å®šå¤§å°ï¼Œçˆ¶å…ƒç´ æŒ‡çš„æ˜¯divä¹‹é¡çš„ï¼Œå°±æ˜¯å¾å¤–é¢åŒ…ä½inputçš„å…ƒç´ */
            border:none;
            border-bottom: 2px solid #ffd6d6;   /*åº•ç·š*/
            padding: 6px 4px;             /*è¨­å®šå…§é‚Šè·ï¼Œå³æ¡†èˆ‡é‚Šæ¡†ä¹‹é–“çš„ç©ºé–“*/
            background-color: transparent;
            font-size: 14px;
            transition: border-color 0.15s ease, box-shadow 0.15s ease;
            /*éæ¸¡æ•ˆæœ*/
            outline: none;     /*å»é™¤è—è‰²å¤–æ¡†*/
        }   

        /*èšç„¦æ™‚åº•ç·šé¡è‰²åŠ æ·±ä¸¦æœ‰è¼•å¾®é™°å½±æç¤º*/
        .todo-exp input[type="text"]:focus{         /*é€™å€‹æ˜¯é‡å°èšç„¦æ™‚é€²è¡Œçš„è¨­è¨ˆ*/
            border-bottom-color: #ff6f61;
            box-shadow: 0 2px 0 rgba(255, 111, 97, 0.07);
        }

        .todo-exp label{
            display: block;
            margin-top:12px;
            margin-bottom: 6px;
            color: #333;
        }


        /*é€™å€‹æ˜¯è¨­å®šæ‰‹æ©Ÿçš„éƒ¨åˆ†*/
        @media(max-width:480px){         /*é€™å€‹çš„æ„æ€æ˜¯ç•¶å±å¹•å°æ–¼ç­‰æ–¼480æ™‚*/
            .todo-exp span {width:22px;margin-right:8px;}
            .todo-exp input[type="text"]{width:calc(100%-36px);font-size: 15px;}
        }

    </style>
</head>
<body>
    <div id="diary-header">
    <div id="username">name</div>
    <div id="date-display"></div>
    <nav>
        <a href="#expenseSection">é–‹éŠ·</a>
        <a href="#todo-header">ä»£è¾¦äº‹é …</a>
        <a href="#todo-exp">å¿ƒå¾—</a>
    </nav>
</div>
    
    <div class="section" id="weatherSection">
        <div>å¤©æ°£</div>
       <div class="options">
            <button data-weather="æ™´">æ™´</button>         <!--â€˜data-â€™çš„é€™ç¨®è¡¨é”å¼ç®—æ˜¯åœ¨htmlä¸­å„²å­˜é¡å¤–éš±è—è³‡æ–™ï¼Œå¾Œé¢å¯ä»¥è®“JSè®€å–é€™å€‹è³‡æ–™-->
            <button data-weather="é›¨">é›¨</button>
            <button data-weather="é›²">é›²</button>
            <button data-weather="é›ª">é›ª</button>
        </div>
    </div>

    <div class="section" id="moodSection">
        <div>å¿ƒæƒ…</div>
        <div class="options">
            <button data-mood="ä½³">ä½³</button>
            <button data-mood="æ™®é€š">æ™®é€š</button>
            <button data-mood="ç³Ÿ">ç³Ÿ</button>
        </div>
    </div>

    

        <div class="section" id="expenseSection">
            <div>ä»Šæ—¥é–‹éŠ·</div>
            <div class="expense-category">
                ğŸ½ï¸é£Ÿç‰©ï¼š
                <input type="number" class="expense_food" placeholder='0'>         <!--placeholderæ˜¯é¡¯ç¤ºçš„åˆå§‹å€¼-->
                <input type="number" class="expense_food" placeholder='0'>
                <input type="number" class="expense_food" placeholder='0'>
                <input type="number" class="expense_food" placeholder='0'>
                <span class="total_food">ç¸½å’Œï¼š</span>
            </div>
              <div class="expense-category">
                ğŸ§‘â€ğŸ“å­¸ç¿’ï¼š
                <input type="number" class="expense_study" placeholder='0'>
                <input type="number" class="expense_study" placeholder='0'>
                <input type="number" class="expense_study" placeholder='0'>
                <input type="number" class="expense_study" placeholder='0'>
                <span class="total_study">ç¸½å’Œï¼š</span>
            </div>
              <div class="expense-category">
                ğŸ›’æ—¥å¸¸ï¼š
                <input type="number" class="expense_daily" placeholder='0'>
                <input type="number" class="expense_daily" placeholder='0'>
                <input type="number" class="expense_daily" placeholder='0'>
                <input type="number" class="expense_daily" placeholder='0'>
                <span class="total_daily">ç¸½å’Œï¼š</span>
            </div>
            <div class="expense-category">
                ğŸ®å¨›æ¨‚ï¼š
                <input type="number" class="expense_entertainment" placeholder='0'>
                <input type="number" class="expense_entertainment" placeholder='0'>
                <input type="number" class="expense_entertainment" placeholder='0'>
                <input type="number" class="expense_entertainment" placeholder='0'>
                <span class="total_entertainment">ç¸½å’Œï¼š</span>
            </div>

            <div class="expense-category">
                ğŸ’°ä»Šæ—¥ç¸½é–‹éŠ·<span id="total_all">0</span>
            </div>
         </div>


        <div id="todo-header">
            <h2>å¾…è¾¦äº‹é …</h2>
            <button id="add-todo">â•æ·»åŠ </button>
        </div>
        <div id="todo-list">
        <!--å°‡æ–°å¢çš„todoæœƒæ’åœ¨é€™è£¡-->
        </div>
       
    
    
    
    <script>
        const selectedDate=localStorage.getItem('selectedDate')||"æœªé¸æ“‡æ—¥æœŸ";
        document.getElementById('date-display').textContent=`æ—¥æœŸ:${selectedDate}`;

        //å¤©æ°£æŒ‰éˆ•äº’å‹•
        document.querySelectorAll('#weatherSection .options button').forEach(btn1=>{                         //querySelectorå¯ä»¥æŠ“åˆ°ç¬¦åˆæ¢ä»¶çš„ç¬¬ä¸€å€‹å…ƒç´ (ä¸é™id or class),querySelectorAllå‰‡å¯ä»¥é¸å–å…¨éƒ¨ç¬¦åˆæ¢ä»¶çš„element
            //å¾Œé¢çš„forEachæ˜¯æŒ‡å°æ‰€æœ‰é¸å–çš„å…ƒç´ éƒ½é€²è¡Œä»¥ä¸‹çš„æŒ‡ä»¤                  //btn=> ç­‰åƒ¹æ–¼function(btn){,btnæ˜¯åƒæ•¸ï¼Œä»£è¡¨æˆ‘å€‘é¸å–çš„å…ƒç´ 
         btn1.addEventListener('click',()=>{
                document.querySelectorAll('#weatherSection .options button').forEach(b1=>b1.classList.remove('selected'));       //é¿å…æˆ‘å€‘æŒ‰å››å€‹ï¼Œå››å€‹éƒ½è¢«æ·»åŠ seletedçš„class,æ‰€ä»¥æ¯æ¬¡é»æ“Šæ™‚éƒ½æœƒremoveä¹‹å‰çš„æ•¸æ“š
                btn1.classList.add('selected');                                                      //é€™å€‹å‰‡æ˜¯æ·»åŠ selectedçµ¦æˆ‘å€‘é»æ“Šçš„æŒ‰éˆ•
                localStorage.setItem(`weather_${selectedDate}`,btn1.dataset.weather)  //.datasetæ˜¯å…§å»ºçš„API System,weatherå‰‡æ˜¯data-weatherä¸­çš„weather,æˆ‘ä¹Ÿä¸æ‡‚ç‚ºä»€éº¼å¯ä»¥é€™æ¨£ç”¨å“ˆå“ˆå“ˆ
            })
        });

        document.querySelectorAll('#moodSection .options button').forEach(btn2=>{
            btn2.addEventListener('click',()=>{
                document.querySelectorAll('#moodSection .options button').forEach(b2=>b2.classList.remove('selected'));
                btn2.classList.add('selected')
                localStorage.setItem(`mood_${selectedDate}`,btn2.dataset.mood);  //å„²å­˜é¸æ“‡çš„å¿ƒæƒ…
            })
        });

        const name=localStorage.getItem("username")||"è¨ªå®¢"            //å¾Œé¢æ˜¯é¿å…ç©ºå€¼çš„çµæœ
        document.getElementById("username").textContent=name;         //ä¸Šé¢åªæ˜¯æå–å‡ºä¾†ï¼Œä½†æ˜¯éœ€è¦é€™è¡Œä¾†æŠŠä¿¡æ¯ä»£å…¥html

        //è¼‰å…¥æ™‚å›å¾©å¤©æ°£é¸æ“‡
        const savedWeather=localStorage.getItem(`weather_${selectedDate}`);
        if(savedWeather){
            document.querySelectorAll('#weatherSection .options button').forEach(btn3=>{         //å› ç‚ºæ˜¯æŠŠå…¨éƒ¨æŒ‰éˆ•éƒ½è·ŸsavedWeatherçš„é¸é …é€²è¡Œå°æ¯”ï¼Œå‡å¦‚ä¸€æ¨£å°±æ·»åŠ selectedçš„weather,é€™æ¨£æ‰æœƒè®Šè‰²
                if(btn3.dataset.weather==savedWeather){
                    btn3.classList.add('selected');
                }
            });
        };

        const savedMood=localStorage.getItem(`mood_${selectedDate}`)
        if(savedMood){
            document.querySelectorAll('#moodSection .options button').forEach(btn4=>{
                if(btn4.dataset.mood==savedMood){
                    btn4.classList.add('selected');
                    }
              });
            };

        //é–‹éŠ·è¼¸å…¥æ¡†çš„IDèˆ‡local storageçš„keyå°æ‡‰
        const expenseGroups=[           //expenseFiledså³ä¸æ˜¯idä¹Ÿä¸æ˜¯classï¼Œæ˜¯jsçš„ç‰©ä»¶ï¼ˆä¹Ÿç®—è®Šæ•¸ï¼‰
           {inputClass:'expense_food',totalClass:'.total_food'},     //åæ­£å°±æ˜¯è‡ªå·±è¨­çš„keyï¼Œæ‡¶æƒ°ç†è§£äº†
           {inputClass:'expense_study',totalClass:'.total_study'},
           {inputClass:'expense_daily',totalClass:'.total_daily'},
           {inputClass:'expense_entertainment',totalClass:'.total_entertainment'},

        ];

        function updateAllTotal() {                // å®£å‘Šä¸€å€‹åå­—å« updateAllTotal çš„å‡½å¼ï¼Œè² è²¬è¨ˆç®—ã€Œä»Šæ—¥ç¸½é–‹éŠ·ã€
             let total = 0;                         // æº–å‚™ä¸€å€‹è®Šæ•¸ totalï¼Œæ”¾å…¨éƒ¨åˆ†é¡åŠ ç¸½çš„çµæœï¼Œå…ˆå¾ 0 é–‹å§‹

    expenseGroups.forEach(group => {       // è¿­ä»£æ¯å€‹é–‹éŠ·åˆ†é¡ï¼ˆä½ å‰é¢å®šç¾©çš„é™£åˆ—ï¼šfood/study/daily/entertainmentï¼‰
        let groupSum = 0;                  // é€™ä¸€å€‹åˆ†é¡è‡ªå·±çš„å°è¨ˆï¼Œå…ˆå¾ 0 é–‹å§‹

        document.querySelectorAll(`.${group.inputClass}`)  // ç”¨ class æŠ“åˆ°é€™å€‹åˆ†é¡çš„æ‰€æœ‰è¼¸å…¥æ¡†
                 .forEach(input => {              // é€ä¸€è™•ç†æ¯å€‹è¼¸å…¥æ¡†
              // input.value æ˜¯å­—ä¸²ï¼ŒNumber(...) è½‰æˆæ•¸å­—ï¼›è‹¥è½‰å‡ºä¾†æ˜¯ NaN/ç©ºå€¼ï¼Œç”¨ || 0 ç•¶å¾Œå‚™å€¼
              groupSum += Number(input.value) || 0;     //æŒ‡inputè£¡é¢çš„å€¼
          });

        total += groupSum;                  // æŠŠé€™å€‹åˆ†é¡çš„å°è¨ˆï¼ŒåŠ é€²ç¸½è¨ˆ total
    });

    // æŠŠç¸½è¨ˆé¡¯ç¤ºåˆ°ç•«é¢ä¸Š id="total_all" çš„ <span> è£¡
    document.getElementById("total_all").textContent = total;

        }

        function updateTotal(className,totalSelector){            //className/totalSelectoræ˜¯è¨­ç½®çš„è®Šæ•¸è€Œå·²
            let sum=0;
            document.querySelectorAll(`.${className}`).forEach(input=>{
                sum+=Number(input.value)  ||0; //æœ‰è€ƒæ…®ç©ºå€¼çš„æƒ…æ³
            });
            document.querySelector(totalSelector).textContent=`ç¸½å’Œ:${sum}`;
        }
        
        expenseGroups.forEach(group=>{
            const inputs =document.querySelectorAll(`.${group.inputClass}`);
            inputs.forEach((input,index)=>{
                //è¼‰å…¥å„²å­˜çš„å€¼
                const savedValue=localStorage.getItem(`${group.inputClass}_${index}_${selectedDate}`);
                if(savedValue !==null){
                    input.value=savedValue;
                }
            //ç¶å®šè¼¸å…¥äº‹ä»¶
            input.addEventListener(`input`,()=>{
                localStorage.setItem(`${group.inputClass}_${index}_${selectedDate}`,input.value);
                updateTotal(group.inputClass,group.totalClass);
                updateAllTotal();
                });
            });
                 //åˆå§‹è¨ˆç®—ä¸€æ¬¡ç¸½å’Œ
            updateTotal(group.inputClass,group.totalClass);
            });

            updateAllTotal();

        function saveTodos(){
            const todos=[];      //å»ºç«‹ä¸€å€‹ç©ºçš„çŸ©é™£
            document.querySelectorAll('.todo-item').forEach(item=>{
                const check=item.querySelector('.todo-check').checked;
                const text=item.querySelector('.todo-text').value;
                const time=item.querySelector('.todo-time').value;
                todos.push({check,text,time});     //pushæ˜¯æŠŠæ±è¥¿ä¸Ÿé€²é™£åˆ—æœ€å¾Œé¢
            });
            localStorage.setItem(`todos_${selectedDate}`,JSON.stringify(todos));           //local.storageåªèƒ½å­˜å­—ä¸²ï¼Œé€™æ™‚å€™è¦ç”¨åˆ°JSON.stringifyå°‡çŸ©é™£è½‰æˆå­—ä¸²
        //JSON:JavaScript Object Notation,ä¸»è¦åŠŸèƒ½æ˜¯è½‰åŒ–æ ¼å¼
        }

        //æ–°å¢ä»£è¾¦è¡Œåˆ—
        const addTodoBtn=document.getElementById('add-todo');
        addTodoBtn.addEventListener('click',()=>{
            const todoList=document.getElementById('todo-list');

            //å»ºç«‹æ–°çš„todo-item
            const newItem=document.createElement('div');
            newItem.classList.add('todo-item');

            newItem.innerHTML=`
                <input type="checkbox" class="todo-check">
                <input type="text" class="todo-text" placeholder="è«‹è¼¸å…¥ä»£è¾¦äº‹é …">
                <input type="time" class="todo-time">
            `;         //åœ¨é€™é‚Š``æ˜¯åå¼•è™Ÿï¼Œå¯ä»¥æ›è¡Œå¯«å¤šè¡Œhtml,é€™å¹¾è¡Œçš„åŠŸèƒ½å°±æ˜¯æŠŠé€™äº›å…§å®¹åŠ å…¥divä¸­

            //åŠ å…¥åˆ°todo-list
           todoList.appendChild(newItem); 

            //ç¶å®šcheckboxäº‹ä»¶
            bindTodoEvents(newItem)

        });

    //ç°¡å–®ä¾†èªªfunctionçš„è¡¨é”å°±æ˜¯y=f(x),itemå°±æ˜¯x(åƒæ•¸),y(å‡½å¼)å°±æ˜¯bindTodoEvents
    function bindTodoEvents(item){          //itemæ˜¯å¿…å¯«çš„ï¼Œç›®å‰ä¹Ÿä¸å¤ªæ˜ç™½ç‚ºä»€éº¼
        const check=item.querySelector('.todo-check');
        const text=item.querySelector('.todo-text');
        const time=item.querySelector('.todo-time');

        //å‰µå»ºåˆªé™¤æŒ‰éˆ•
        let deleteBtn=document.createElement('button');
        deleteBtn.textContent='âŒ';
        deleteBtn.style.marginLeft='10px';
        item.appendChild(deleteBtn);



        //ç•¶checkoxæ”¹è®Šæ™‚
        check.addEventListener('change',()=>{
         if(check.checked){                          //.checkedæ˜¯dom apiåˆ¤æ–·check.checkedæ˜¯ä¸æ˜¯===true(å³æ‰“é‰¤)ï¼Œifçš„æ„æ€æ˜¯å‡å¦‚æ‰“é‰¤ï¼Œæ²’æ‰“é‰¤å±¬æ–¼else
                item.classList.add('completed');}
                else{
                    item.classList.remove('completed');
                }
                saveTodos();
        });

        text.addEventListener('input',saveTodos);
        time.addEventListener('input',saveTodos);


        //ç•¶é»æ“Šåˆªé™¤æŒ‰éˆ•æ™‚
        deleteBtn.addEventListener('click',()=>{
            item.remove();
            saveTodos();
        })
    }
    
    // å°æ¯å€‹åœ¨.todo-itemçš„å…ƒç´ éƒ½åŸ·è¡ŒbindTodoEventsé€™å€‹function
    document.querySelectorAll('.todo-item').forEach(item=>bindTodoEvents(item));                //.forEach(function=>(elememt,index,array)),forè¿´åœˆæ˜¯é€™æ¨£è¨­å®šçš„ï¼Œç¬¬ä¸€å€‹åƒæ•¸æ˜¯å…ƒç´ ï¼Œç¬¬äºŒå€‹æ˜¯å…ƒç´ é †åºï¼Œç¬¬ä¸‰å€‹æ˜¯é™£åˆ—
    //ä»¥ä¸Šé€™å¥è³¦å€¼çµ¦item,ç„¶å¾Œitemå†ä½œç”¨åœ¨bindTodoEvent
     
    //è¼‰å…¥localStorage

    const todoList=document.getElementById('todo-list');

    //å…ˆæ¸…ç©ºé™¤æŒ‰éˆ•ä¹‹å¤–çš„todo-item
    document.querySelectorAll('.todo-item').forEach(item=>item.remove());
    const savedTodos=localStorage.getItem(`todos_${selectedDate}`);
    if(savedTodos){
        const todoArray=JSON.parse(savedTodos);         //JSON.parseæ˜¯æŠŠJSON.stringifyå„²å­˜çš„æ±è¥¿è½‰æˆåŸæœ¬çš„æ ¼å¼
        todoArray.forEach(todo=>{
            const newItem=document.createElement('div');
            newItem.classList.add('todo-item');
            newItem.innerHTML=`
             <input type="checkbox" class="todo-check" ${todo.check?'checked':''}>
            <input type="text" class="todo-text"  value="${todo.text}" placeholder="è«‹è¼¸å…¥ä»£è¾¦äº‹é …">
            <input type="time" class="todo-time" value='${todo.time}'>`;
           
            if(todo.check){
                newItem.classList.add('completed');
            }
            todoList.appendChild(newItem);
            bindTodoEvents(newItem); //é€™å€‹æ˜¯å‘¼å«functionçš„æ„æ€
        });
    }else{
        //å¦‚æœæ²’æœ‰ä»»ä½•è³‡æ–™ï¼Œé è¨­å»ºç«‹ä¸‰å€‹ç©ºç™½è¡Œåˆ—
        for(let p=0;p<3;p++){
            const newItem=document.createElement('div');
            newItem.classList.add('todo-item');
            newItem.innerHTML=`
            <input type="checkbox" class="todo-check">
            <input type="text" class="todo-text" placeholder="è«‹è¼¸å…¥ä»£è¾¦äº‹é …">
            <input type="time" class="todo-time">`
        ;
        todoList.appendChild(newItem);
        bindTodoEvents(newItem);
        };
    }
    //æ³¨æ„functionæ˜¯å¯ä»¥è¢«å‘¼å«çš„ï¼Œä½†æ˜¯constå®šç¾©çš„å‡½æ•¸æ˜¯ä¸èƒ½è¢«å‘¼å«çš„
        
        
    // å…ˆæ¸…ç©ºç›®å‰çš„ .todo-itemï¼ˆä¿éšªï¼‰
document.querySelectorAll('.todo-item').forEach(item => item.remove());

const raw = localStorage.getItem(`todos_${selectedDate}`);
let todoArray = [];
try {                                    //é€™å€‹functionçš„ä½œç”¨æ˜¯å˜—è©¦é‹è¡Œ{}å…§çš„ç¨‹å¼ï¼Œå¦‚æœä¸èƒ½å°±åŸ·è¡Œcatchçš„èªæ³•
  todoArray = raw ? JSON.parse(raw) : [];        //parseçš„æ„æ€æ˜¯è§£æï¼ŒJSON.parseå‰‡æ˜¯æŠŠå„²å­˜çš„å­—ä¸²è§£ææˆåŸæœ¬çš„æ ¼å¼(å¦‚ï¼šçŸ©é™£ç­‰)
  //ä¸Šé¢çš„æ„æ€è§£æï¼Œ"?:"çš„ä½œç”¨æ˜¯if,elseçš„ç¸®å¯«å¦‚æœæœ‰å€¼å‰‡è§£æï¼Œæ²’æœ‰å€¼å‰‡é»˜èªç‚ºç©ºçŸ©é™£
} catch (e) {           //é€™å€‹eæ˜¯æŒ‡errorçš„æ„æ€ï¼Œä¸éåªæ˜¯ä»£è™Ÿï¼Œç•¶ä¸Šé¢çš„è¨Šè¨Šæ¯ä¸èƒ½é‹è¡Œï¼Œé›»è…¦å‰‡æœƒæŠŠéŒ¯èª¤çš„è¨Šæ¯æ”¾é€²e
  todoArray = [];
}

// å¦‚æœæ²’æœ‰è³‡æ–™æˆ–æ˜¯ç©ºé™£åˆ—ï¼Œå°±å…ˆå»ºç«‹ 3 è¡Œé è¨­æ¬„ä½
if (!Array.isArray(todoArray) || todoArray.length === 0) {    //!Array.isArrayæ˜¯ä¸€èµ·ä½¿ç”¨çš„ï¼Œé€™å¹¾å€‹çµ„åˆèµ·ä¾†å°±æ˜¯èªªtodoArrayä¸æ˜¯çŸ©é™£çš„æ„æ€              
  //"||"é€™å€‹çš„æ„æ€or,å¾Œé¢çš„todoArray.length===0å‰‡æ˜¯è¡¨ç¤ºèªªçŸ©é™£æ˜¯ç©ºçš„
    for (let i = 0; i < 3; i++) {
    const newItem = document.createElement('div');
    newItem.classList.add('todo-item');
    newItem.innerHTML = `
      <input type="checkbox" class="todo-check">
      <input type="text" class="todo-text" placeholder="è«‹è¼¸å…¥ä»£è¾¦äº‹é …">
      <input type="time" class="todo-time">
    `;
    todoList.appendChild(newItem);
    bindTodoEvents(newItem);
  }
  // ç«‹åˆ»å­˜èµ·ä¾†ï¼Œä¸‹æ¬¡é‡æ•´ä¹Ÿæœƒæœ‰ä¸‰è¡Œ
  saveTodos();
} else {
  // æœ‰è³‡æ–™å°±ç…§è‘—æ¸²æŸ“x
  todoArray.forEach(todo => {
    const newItem = document.createElement('div');
    newItem.classList.add('todo-item');
    newItem.innerHTML = `
      <input type="checkbox" class="todo-check" ${todo.check ? 'checked' : ''}>
      <input type="text" class="todo-text" value="${todo.text || ''}" placeholder="è«‹è¼¸å…¥ä»£è¾¦äº‹é …">
      <input type="time" class="todo-time" value="${todo.time || ''}">
    `;
    if (todo.check) newItem.classList.add('completed');
    todoList.appendChild(newItem);
    bindTodoEvents(newItem);
  });
}   



    </script>

<div class="todo-exp" id="todo-exp">
<h2>å¿ƒå¾—</h2>
<label for="name">
    <strong>ä»Šæ—¥é€²æ­¥</strong><br>
</label>
<span>1.</span><input type="text"  id="exp-up-1"><br>
<span>2.</span><input type="text"  id="exp-up-2"><br>
<span>3.</span><input type="text"  id="exp-up-3"><br>


<label for="name">
    <strong>ä»Šæ—¥åæ€</strong><br>
</label>
<span>1.</span><input type="text"  id="exp-down-1"><br>
<span>2.</span><input type="text"  id="exp-down-2"><br>
<span>3.</span><input type="text"  id="exp-down-3"><br>



</div>

<script>
document.getElementById('exp-up-1').value=localStorage.getItem('exp-up-1')||'';
document.getElementById('exp-up-2').value=localStorage.getItem('exp-up-2')||"";
document.getElementById('exp-up-3').value=localStorage.getItem('exp-up-3')||"";

//è¨­å®šEventListener
document.getElementById('exp-up-1').addEventListener('input',function(){
    localStorage.setItem("exp-up-1", this.value);
});

document.getElementById('exp-up-2').addEventListener('input',function(){
    localStorage.setItem('exp-up-2',this.value);
});

document.getElementById('exp-up-3').addEventListener('input',function(){
    localStorage.setItem('exp-up-3', this.value);
});

document.getElementById('exp-down-1').value=localStorage.getItem('exp-down-1')||"";
document.getElementById('exp-down-2').value=localStorage.getItem('exp-down-2')||"";
document.getElementById('exp-down-3').value=localStorage.getItem('exp-down-3')||"";

document.getElementById("exp-down-1").addEventListener('input',function(){
    localStorage.setItem("exp-down-1",this.value);
});
document.getElementById("exp-down-2").addEventListener('input',function(){
    localStorage.setItem("exp-down-2",this.value);
});
document.getElementById("exp-down-3").addEventListener('input',function(){
    localStorage.setItem("exp-down-3",this.value);
});
</script>
</body>
</html>